

# CHAPTER 07. SQL 고급

## 7.1 MySQL의 데이터 형식

### 7.1.1 MySQL에서 지원하는 데이터 형식의 종류

* MySQL에서 데이터 형식의 종류는 30개 가까이 된다.
* 자주 사용되는 것은 이름 앞에 별표(⭐️)를 해놓자.

#### 숫자 데이터 형식

|             데이터 형식             | 바이트 수 |      숫자 범위       |                             설명                             |
| :---------------------------------: | :-------: | :------------------: | :----------------------------------------------------------: |
|               BIT(N)                |    N/8    |                      |            1~64bit를 표현. b'0000' 형식으로 표현             |
|               TINYINT               |     1     |       -128~127       |                             정수                             |
|              ⭐️SMALLINT              |     2     |    -32,768~32,767    |                             정수                             |
|              MEDIUMINT              |     3     | -8,388,608~8,388,607 |                             정수                             |
|          ⭐️INT<br />INTEGER          |     4     |    약 -21억~+21억    |                             정수                             |
|               ⭐️BIGINT               |     8     |   약 -900경~+900경   |                             정수                             |
|               ⭐️FLOAT                |     4     | -3.40E+38~-1.17E-38  |                  소수점 아래 7자리까지 표현                  |
|          DOUBLE<br />REAL           |     8     | -1.22E-308~1.79E+308 |                  소수점 아래15자리까지 표현                  |
| ⭐️DECIMAL(m,[d])<br />NUMERIC(m,[d]) |   5~17    | -10^38+1 ~ +10^38-1  | 전체 자릿수(m)와 소수점 이하 자릿수(d)를 가진 숫자형<br />예)decimal(5,2) 전체 자릿수를 5자리로 하되, 그 중 소수점 이하를 2자리로 하겠다. |

* `DECIMAL`데이터 형식은 정확한 수치를 저장하게 되고 `FLOAT, DOUBLE`은 근사치의 숫자를 저장한다.
  대신 `FLOAT, DOUBLE`은 상당히 큰 숫자를 저장할 수 있다는 장점이 있음.
* 소수점이 들어간 실수를 저장하려면 되도록 `DECIMAL`을 사용하는 것이 바람직하다.
  예) -999999.99부터 +999999.99까지의 숫자를 저장할 경우에는 `DECIMAL(9,2)`로 설정한다.
* 부호없는 정수를 지정할 때는 `UNSIGNED`예약어를 뒤에 붙여준다.

#### 문자 데이터 형식

|  데이터 형식  | 바이트 수  |                             설명                             |
| :-----------: | :--------: | :----------------------------------------------------------: |
|   ⭐️CHAR(n)    |   1~255    | 고정길이 문자형.<br />n을 1부터 255까지 지정한다.<br />그냥 CHAR만 쓰면 CHAR(1)과 동일하다. |
|  ⭐️VARCHAR(n)  |  1~65535   | 가변길이 문자형.<br />n을 사용하면 1부터 65535까지 지정한다.<br />Variable character의 약자이다. |
|   BINARY(n)   |   1~255    |                  고정길이의 이진 데이터 값                   |
| VARBINARY(n)  |   1~255    |                  가변길이의 이진 데이터 값                   |
|   TINYTEXT    |   1~255    |                      255 크기의 TEXT 값                      |
|     TEXT      |  1~65535   |                       N크기의 TEXT 값                        |
|  MEDIUMTEXT   | 1~16777215 |                   16777215 크기의 TEXT 값                    |
|   ⭐️LONGTEXT   |   1~4GB    |                      최대 4GB의 TEXT 값                      |
|   TINYBLOB    |   1~255    |                   255크기의 BLOB 데이터 값                   |
|     BLOB      |  1~65535   |                   N 크기의 BLOB 데이터 값                    |
|  MEDIUMBLOB   | 1~16777215 |                1677215 크기의 BLOB 데이터 값                 |
|   ⭐️LONGBLOB   |   1~4GB    |                최대 4GB 크기의 BLOB 데이터 값                |
| ENUM(값들...) |   1또는2   |               최대 65535개의 열거형 데이터 값                |
| SET(값들...)  | 1,2,3,4,8  |               최대 64개의 서로 다른 데이터 값                |

* `CHAR`형식은 고정길이 문자형으로 자릿수가 고정되어 있다. 
  예를 들어, `CHAR(100)`에 'ABC' 3글자만 저장해도 100자리를 모두 확보한 후에 앞에 3자리를 사용하고, 뒤 97자리는 낭비한다.
* `VARCHAR`형식은 가변길이 문자형으로 `VARCHAR(100)`에 'ABC' 3글자를 저장할 경우에 3자리만 사용하게 된다.
  공간을 효율적으로 사용할 수 있다.
* 하지만 `CHAR`형식으로 설정하는 것이 `INSERT/UPDATE`시에 일반적으로 더 좋은 성능을 발휘한다.
* `BINARY`와 `VARBINARY`는 바이트 단위의 이진 데이터 값을 지정하는 데 사용된다.
* `TEXT`형식은 대용량의 글자를 저장하기 위한 형식으로 필요한 크기에 따라 `TINYTEXT, TEXT, MEDIUMTEXT, LONGTEXT`등의 형식을 사용할 수 있다.
* `BLOB(Binary Large Object)`은 사진 파일, 동영상 파일, 문서 파일 등의 대용량 이진 데이터를 저장하는 데 사용될 수 있다.
* `ENUM`은 열거형 데이터를 사용할 때 사용될 수 있다.(월, 화, 수, 목, 금, 토, 일)을 `ENUM`형식으로 설정할 수 있다.
* `SET`은 최대 64개를 준비한 후에 입력은 그 중에서 2개씩 세트로 데이터를 저장시키는 방식을 사용한다. 

#### 날짜와 시간 데이터 형식

| 데이터 형식 | 바이트 수 | 설명                                                         |
| :---------: | :-------: | ------------------------------------------------------------ |
|    ⭐DATE    |     3     | 날짜는 1001-01-01 ~ 9999~12~31까지 저장되며 날짜 형식만 사용<br />'YYYY-MM-DD' 형식으로 사용 |
|    TIME     |     3     | 'HH:MM:SS' 형식으로 사용                                     |
|  ⭐DATETIME  |     8     | 'YYYY-MM-DD HH:MM:SS' 형식으로 사용                          |
|  TIMESTAMP  |     4     | 'YYYY-MM-DD HH:MM:SS' 형식으로 사용. <br />time_zone 시스템 변수와 관련이 있으며 UTC 시간대 변환하여 저장 |
|    YEAR     |     1     | 1901 ~ 2155까지 저장. 'YYYY' 형식으로 사용                   |

```mysql
SELECT CAST('2022-06-18 20:13:29.123' AS DATE) AS 'DATE'; -- 2022-06-28
SELECT CAST('2022-06-18 20:13:29.123' AS TIME) AS 'TIME'; -- 20:13:29
SELECT CAST('2022-06-18 20:13:29.123' AS DATETIME) AS 'DATETIME'; -- 2022-06-18 20:13:29
```

#### 기타 데이터 형식

| 데이터 형식 | 바이트 수 |                             설명                             |
| :---------: | :-------: | :----------------------------------------------------------: |
|  ⭐GEOMETRY  |    N/A    | 공간데이터 형식으로 선, 점 및 다각형 같은 공간 데이터 개체를 저장하고 조작 |
|    ⭐JSON    |     8     |         JSON(JavaScript Object Notation) 문서를 저장         |

